# imports
import math
import numpy as np
from scipy.optimize import curve_fit
import matplotlib.pyplot as plt
from scipy.interpolate import interp1d

# Part 1 ----------------------------------------------------------------------------------
#-------------------------------------------------------------------------------- 20/9/2023
#------------------------------------------------------------------------------------------

# 1.5.3 ----------------------------------------------------------------------------------------
# Signals graphs

#------------500 Hz---------------
# Vi w/ 1.5 V de offset
#x_vi = [0.5, 0.5, 0.53369, 0.56739, 1.0006, 1.0006, 1.5012, 1.5012, 1.99699, 1.99699, 2.50241, 2.50241, 2.52166, 2.56498, 2.9982, 2.9982, 3.4988, 3.4988, 3.9994, 3.9994, 4.5, 4.5, 4.52888, 4.56739]
#y_vi = [1.4, 1.46154, 1.49846, 1.49846, 1.96, 2.00308, 1.56, 1.49846, 0.99385, 0.95077, 1.38769, 1.44923, 1.49846, 1.49846, 1.94769, 1.99077, 1.57231, 1.50462, 1.00615, 0.95077, 1.4, 1.44308, 1.50462, 1.50462]

# V2 w/ -0.5V de offset
#É preciso
#x_v2 = [0.00384, 0.00384, 0.5, 0.5, 1.00055, 1.00055, 1.50549, 1.5011, 2.00165, 1.99726, 2.51098, 2.50659, 2.99835, 2.99835, 3.4989, 3.4989, 4.00823, 4.00823, 4.5, 4.50439]
#y_v2= [0.51977, 0.47458, 0.50847, 0.45198, 0.49718, 0.44633, 0.50282, 0.45198, 0.50282, 0.45763, 0.49153, 0.44633, 0.49153, 0.45198, 0.49718, 0.46328, 0.50282, 0.46893, 0.50282, 0.45763]
# Gain
V1_gain_500 = 0
V2_gain_500 = 0.17/1.09
V3_gain_500 = 1.11/1.09
# Gain dB
V1_gain_500_dB = 0
V2_gain_500_dB = 20*math.log10(V2_gain_500)
V3_gain_500_dB = 20*math.log10(V3_gain_500)

print("Para 500 Hz: G1\t|\t G1 em dB")
print("         {:.4f}\t|\t{:.4f}".format(V1_gain_500, V1_gain_500_dB))
print("         {:.4f}\t|\t{:.4f}".format(V2_gain_500, V2_gain_500_dB))
print("         {:.4f}\t|\t{:.4f}".format(V3_gain_500, V3_gain_500_dB))

#-------------4000 Hz---------------
#Não é preciso
# Gain
V1_gain_4000 = 1.21/1.17
V2_gain_4000 = 1.21/1.17
V3_gain_4000 = 1
# Gain dB
V1_gain_4000_dB = 20*math.log10(V1_gain_4000)
V2_gain_4000_dB = 20*math.log10(V2_gain_4000)
V3_gain_4000_dB = 20*math.log10(V3_gain_4000)

print("Para 4k Hz: G1\t|\t G1 em dB")
print("             {:.4f}\t|\t{:.4f}".format(V1_gain_4000, V1_gain_4000_dB))
print("             {:.4f}\t|\t{:.4f}".format(V2_gain_4000, V2_gain_4000_dB))
print("             {:.4f}\t|\t{:.4f}".format(V3_gain_4000, V3_gain_4000_dB))

# -----------10000 Hz--------------

## Vi w/ 1.5 V de offset
##é preciso
#x_vi= [0.35057, 0.87642, -0.35057, 19.80719, 19.80719, 20.68361, 60.47327, 59.59684, 60.47327, 80.10517, 80.28046, 99.91236, 100.08764, 120.07011, 120.07011, 140.22787, 139.8773, 160.03506, 160.03506, 179.84224, 180.3681, 180.01753, 199.47415, 199.47415, 198.24715]
#y_vi = [2.98017, 3.07082, 3.03683, 3.50142, 3.4221, 3.49008, 2.65156, 2.5949, 2.58357, 2.56091, 2.49292, 3.05949, 3.00283, 3.51275, 3.4221, 3.26346, 3.2068, 2.68555, 2.57224, 2.50425, 2.43626, 2.58357, 3.00283, 2.92351, 3.0255]
## V1 w/ 0.5V de offset
##é preciso
#
#x_v1 = [0.35057, 0, 1.05171, 20.33304, 20.33304, 20.15776, 40.31551, 40.31551, 40.4908, 60.29798, 60.29798, 60.29798, 80.28046, 80.28046, 100.26293, 100.26293, 120.2454, 120.42068, 140.05259, 140.22787, 160.03506, 160.03506, 180.19281, 180.19281, 194.91674, 193.16389, 191.9369, 190.7099]
#y_1 = [1.16714, 1.25779, 1.2238, 1.41643, 1.52975, 1.59773, 0.94051, 1.01983, 1.09915, 0.38527, 0.46459, 0.54391, 0.56657, 0.64589, 1.1898, 1.28045, 1.45042, 1.55241, 0.99717, 1.07649, 0.3966, 0.49858, 0.56657, 0.66856, 1.0085, 1.01983, 0.99717, 1.0085]
## V2 w/ -0.5V de offset
##é preciso
#x_v = [13.32165, 11.39351, 15.77564, 17.3532, 14.54864, 40.4908, 40.4908, 40.31551, 60.47327, 60.29798, 80.28046, 80.10517, 100.26293, 100.43821, 120.42068, 120.42068, 140.05259, 140.05259, 160.21034, 160.03506, 180.19281, 180.19281]
#y_v2 = [-1.0085, -1.0085, -1.0085, -1.0085, -1.0085, -1.34844, -1.28045, -1.21246, -1.20113, -1.13314, -0.91785, -0.8272, -0.91785, -0.80453, -1.15581, -1.04249, -1.32578, -1.2238, -1.21246, -1.11048, -0.94051, -0.86119]
## V3 w/ -1.5V de offset
##é preciso
#x = [40.31551, 40.4908, 20.33304, 20.33304, 60.47327, 60.1227, 80.28046, 80.10517, 100.26293, 100.26293, 120.07011, 120.42068, 140.22787, 140.22787, 159.85977, 160.03506, 180.01753, 180.01753, -0.17528, 0, 199.64943, 200]
#y = [-2.79887, -2.68555, -2.85552, -2.75354, -2.71955, -2.6289, -2.71955, -2.61756, -2.83286, -2.74221, -2.85552, -2.76487, -2.74221, -2.66289, -2.67422, -2.58357, -2.70822, -2.60623, -2.83286, -2.73088, -2.8102, -2.71955]
#
## Gain
#V1_gain_10000 = 0
#V2_gain_10000 = 0
#V3_gain_10000 = 0
## Gain dB
#V1_gain_10000_dB = 0
#V2_gain_10000_dB = 0
#V3_gain_10000_dB = 0
# -----------20000 Hz--------------

# V3 w/ -1.5V de offset
#é preciso

# Gain
V1_gain_20000 = 1
V2_gain_20000 = 0.3/1.17
V3_gain_20000 = 0
# Gain dB
V1_gain_20000_dB = 20*math.log10(V1_gain_20000)
V2_gain_20000_dB = 20*math.log10(V2_gain_20000)
V3_gain_20000_dB = 0

print("Para 20k Hz: G1\t|\t G1 em dB")
print("             {:.4f}\t|\t{:.4f}".format(V1_gain_20000, V1_gain_20000_dB))
print("             {:.4f}\t|\t{:.4f}".format(V2_gain_20000, V2_gain_20000_dB))
print("             {:.4f}\t|\t{:.4f}".format(V3_gain_20000, V3_gain_20000_dB))
